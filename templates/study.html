{% extends "layout.html" %}

{% block body %}
<h2>Study Planner</h2>

<form action="/study" method="post" style="margin-bottom: 30px;">
    <h3 style="margin-top: 0; font-size: 18px;">Add New Task</h3>
    
    <div class="form-group">
        <label for="title">Task Title:</label>
        <input type="text" id="title" name="title" placeholder="e.g., Chapter 5 Reading" required>
    </div>
    
    <div class="form-group">
        <label for="description">Description (optional):</label>
        <textarea id="description" name="description" placeholder="Add notes or details..." style="height: 80px; font-family: Arial, sans-serif;"></textarea>
    </div>
    
    <div class="form-group">
        <label for="due_date">Due Date:</label>
        <input type="date" id="due_date" name="due_date" required>
    </div>
    
    <button type="submit">Add Task</button>
</form>

<hr>

<h3>Your Tasks</h3>
{% if tasks %}
    <ul style="list-style: none; padding: 0;">
        {% for task in tasks %}
            <li style="background: white; padding: 15px; margin-bottom: 10px; border-radius: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
                <div style="display: flex; justify-content: space-between; align-items: start;">
                    <div style="flex-grow: 1;">
                        {% if task.completed %}
                            <strong style="text-decoration: line-through; color: #888;">{{ task.title }}</strong>
                            <span style="background: #d4edda; color: #155724; padding: 2px 8px; border-radius: 3px; font-size: 12px; margin-left: 10px;">Completed</span>
                        {% else %}
                            <strong>{{ task.title }}</strong>
                            <span style="background: #fff3cd; color: #856404; padding: 2px 8px; border-radius: 3px; font-size: 12px; margin-left: 10px;">Pending</span>
                        {% endif %}
                        
                        {% if task.due_date %}
                            <div style="font-size: 14px; color: #666; margin-top: 5px;">ðŸ“… Due: {{ task.due_date }}</div>
                        {% endif %}
                        
                        {% if task.description %}
                            <div style="font-size: 14px; color: #666; margin-top: 5px; font-style: italic;">{{ task.description }}</div>
                        {% endif %}
                    </div>
                    
                    <div style="text-align: right;">
                        <a href="/toggle_task/{{ task.id }}" style="display: inline-block; padding: 5px 10px; background: var(--primary-color); color: white; border-radius: 3px; text-decoration: none; margin-right: 5px; font-size: 13px;">
                            {% if task.completed %}Mark Pending{% else %}Mark Done{% endif %}
                        </a>
                        <a href="/delete_task/{{ task.id }}" onclick="return confirm('Delete this task?')" style="display: inline-block; padding: 5px 10px; background: var(--danger-color); color: white; border-radius: 3px; text-decoration: none; font-size: 13px;">
                            Delete
                        </a>
                    </div>
                </div>
            </li>
        {% endfor %}
    </ul>
{% else %}
    <p style="background: #f0f0f0; padding: 20px; border-radius: 4px; text-align: center; color: #666;">
        ðŸ“š No tasks yet. Create one to get started!
    </p>
{% endif %}
{% endblock %}